<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../../img/favicon.ico">
  <title>bme280 - NodeMCU Documentation</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../../css/highlight.css">
  <link href="../../../css/extra.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "bme280";
    var mkdocs_page_input_path = "en/modules/bme280.md";
    var mkdocs_page_url = "/en/modules/bme280/";
  </script>
  
  <script src="../../../js/jquery-2.1.1.min.js"></script>
  <script src="../../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../../.." class="icon icon-home"> NodeMCU Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../../..">Overview</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../build/">Building the firmware</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../flash/">Flashing the firmware</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../spiffs/">Internal filesystem notes</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../sdcard/">Filesystem on SD card</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../upload/">Uploading code</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">FAQs</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../lua-developer-faq/">Lua Developer FAQ</a>
                </li>
                <li class="">
                    
    <a class="" href="../../extn-developer-faq/">Extension Developer FAQ</a>
                </li>
                <li class="">
                    
    <a class="" href="../../hardware-faq/">Hardware FAQ</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../support/">Support</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Modules</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../adc/">adc</a>
                </li>
                <li class="">
                    
    <a class="" href="../ads1115/">ads1115</a>
                </li>
                <li class="">
                    
    <a class="" href="../adxl345/">adxl345</a>
                </li>
                <li class="">
                    
    <a class="" href="../am2320/">am2320</a>
                </li>
                <li class="">
                    
    <a class="" href="../apa102/">apa102</a>
                </li>
                <li class="">
                    
    <a class="" href="../bit/">bit</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">bme280</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#bme280-module">BME280 module</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#bme280altitude">bme280.altitude()</a></li>
        
            <li><a class="toctree-l4" href="#bme280baro">bme280.baro()</a></li>
        
            <li><a class="toctree-l4" href="#bme280dewpoint">bme280.dewpoint()</a></li>
        
            <li><a class="toctree-l4" href="#bme280humi">bme280.humi()</a></li>
        
            <li><a class="toctree-l4" href="#bme280init">bme280.init()</a></li>
        
            <li><a class="toctree-l4" href="#bme280qfe2qnh">bme280.qfe2qnh()</a></li>
        
            <li><a class="toctree-l4" href="#bme280read">bme280.read()</a></li>
        
            <li><a class="toctree-l4" href="#bme280startreadout">bme280.startreadout()</a></li>
        
            <li><a class="toctree-l4" href="#bme280setup">bme280.setup()</a></li>
        
            <li><a class="toctree-l4" href="#bme280temp">bme280.temp()</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../bmp085/">bmp085</a>
                </li>
                <li class="">
                    
    <a class="" href="../cjson/">cjson</a>
                </li>
                <li class="">
                    
    <a class="" href="../coap/">coap</a>
                </li>
                <li class="">
                    
    <a class="" href="../cron/">cron</a>
                </li>
                <li class="">
                    
    <a class="" href="../crypto/">crypto</a>
                </li>
                <li class="">
                    
    <a class="" href="../dht/">dht</a>
                </li>
                <li class="">
                    
    <a class="" href="../ds18b20/">ds18b20</a>
                </li>
                <li class="">
                    
    <a class="" href="../encoder/">encoder</a>
                </li>
                <li class="">
                    
    <a class="" href="../enduser-setup/">enduser setup</a>
                </li>
                <li class="">
                    
    <a class="" href="../file/">file</a>
                </li>
                <li class="">
                    
    <a class="" href="../gdbstub/">gdbstub</a>
                </li>
                <li class="">
                    
    <a class="" href="../gpio/">gpio</a>
                </li>
                <li class="">
                    
    <a class="" href="../hdc1080/">hdc1080</a>
                </li>
                <li class="">
                    
    <a class="" href="../hmc5883l/">hmc5883l</a>
                </li>
                <li class="">
                    
    <a class="" href="../http/">http</a>
                </li>
                <li class="">
                    
    <a class="" href="../hx711/">hx711</a>
                </li>
                <li class="">
                    
    <a class="" href="../i2c/">i2c</a>
                </li>
                <li class="">
                    
    <a class="" href="../l3g4200d/">l3g4200d</a>
                </li>
                <li class="">
                    
    <a class="" href="../mcp4725/">mcp4725</a>
                </li>
                <li class="">
                    
    <a class="" href="../mdns/">mdns</a>
                </li>
                <li class="">
                    
    <a class="" href="../mqtt/">mqtt</a>
                </li>
                <li class="">
                    
    <a class="" href="../net/">net</a>
                </li>
                <li class="">
                    
    <a class="" href="../node/">node</a>
                </li>
                <li class="">
                    
    <a class="" href="../ow/">ow (1-Wire)</a>
                </li>
                <li class="">
                    
    <a class="" href="../pcm/">pcm</a>
                </li>
                <li class="">
                    
    <a class="" href="../perf/">perf</a>
                </li>
                <li class="">
                    
    <a class="" href="../pwm/">pwm</a>
                </li>
                <li class="">
                    
    <a class="" href="../rc/">rc</a>
                </li>
                <li class="">
                    
    <a class="" href="../rfswitch/">rfswitch</a>
                </li>
                <li class="">
                    
    <a class="" href="../rotary/">rotary</a>
                </li>
                <li class="">
                    
    <a class="" href="../rtcfifo/">rtcfifo</a>
                </li>
                <li class="">
                    
    <a class="" href="../rtcmem/">rtcmem</a>
                </li>
                <li class="">
                    
    <a class="" href="../rtctime/">rtctime</a>
                </li>
                <li class="">
                    
    <a class="" href="../si7021/">si7021</a>
                </li>
                <li class="">
                    
    <a class="" href="../sigma-delta/">sigma delta</a>
                </li>
                <li class="">
                    
    <a class="" href="../sjson/">sjson</a>
                </li>
                <li class="">
                    
    <a class="" href="../sntp/">sntp</a>
                </li>
                <li class="">
                    
    <a class="" href="../somfy/">somfy</a>
                </li>
                <li class="">
                    
    <a class="" href="../spi/">spi</a>
                </li>
                <li class="">
                    
    <a class="" href="../struct/">struct</a>
                </li>
                <li class="">
                    
    <a class="" href="../switec/">switec</a>
                </li>
                <li class="">
                    
    <a class="" href="../tcs34725/">tcs34725</a>
                </li>
                <li class="">
                    
    <a class="" href="../tls/">tls</a>
                </li>
                <li class="">
                    
    <a class="" href="../tm1829/">tm1829</a>
                </li>
                <li class="">
                    
    <a class="" href="../tmr/">tmr</a>
                </li>
                <li class="">
                    
    <a class="" href="../tsl2561/">tsl2561</a>
                </li>
                <li class="">
                    
    <a class="" href="../u8g/">u8g</a>
                </li>
                <li class="">
                    
    <a class="" href="../uart/">uart</a>
                </li>
                <li class="">
                    
    <a class="" href="../ucg/">ucg</a>
                </li>
                <li class="">
                    
    <a class="" href="../websocket/">websocket</a>
                </li>
                <li class="">
                    
    <a class="" href="../wifi/">wifi</a>
                </li>
                <li class="">
                    
    <a class="" href="../wps/">wps</a>
                </li>
                <li class="">
                    
    <a class="" href="../ws2801/">ws2801</a>
                </li>
                <li class="">
                    
    <a class="" href="../ws2812/">ws2812</a>
                </li>
                <li class="">
                    
    <a class="" href="../xpt2046/">xpt2046</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../..">NodeMCU Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../..">Docs</a> &raquo;</li>
    
      
        
          <li>Modules &raquo;</li>
        
      
    
    <li>bme280</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/nodemcu/nodemcu-firmware/edit/master/docs/en/modules/bme280.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="bme280-module">BME280 module<a class="headerlink" href="#bme280-module" title="Permanent link">&para;</a></h1>
<table>
<thead>
<tr>
<th align="left">Since</th>
<th align="left">Origin / Contributor</th>
<th align="left">Maintainer</th>
<th align="left">Source</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">2016-02-21</td>
<td align="left"><a href="https://github.com/vsky279">vsky279</a></td>
<td align="left"><a href="https://github.com/vsky279">vsky279</a></td>
<td align="left"><a href="../../../../app/modules/bme280.c">bme280.c</a></td>
</tr>
</tbody>
</table>
<p>This module provides a simple interface to <a href="http://www.bosch-sensortec.com/bst/products/all_products/bme280">BME280/BMP280 temperature/air presssure/humidity sensors</a> (Bosch Sensortec).</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>Note that you must call <a href="#bme280setup"><code>setup()</code></a> before you can start reading values! Furthermore, there has to be a variable delay between some tens to hundreds of milliseconds between <code>setup()</code> and reading measurements. Instead of using a fixed delay you might also poll the sensor until data is delivered e.g. <code>humi()</code> not returning <code>nil</code> anymore.</p>
</div>
<h2 id="bme280altitude">bme280.altitude()<a class="headerlink" href="#bme280altitude" title="Permanent link">&para;</a></h2>
<p>For given air pressure and sea level air pressure returns the altitude in meters as an integer multiplied with 100, i.e. altimeter function.</p>
<h4 id="syntax">Syntax<a class="headerlink" href="#syntax" title="Permanent link">&para;</a></h4>
<p><code>bme280.altitude(P, QNH)</code></p>
<h4 id="parameters">Parameters<a class="headerlink" href="#parameters" title="Permanent link">&para;</a></h4>
<ul>
<li><code>P</code> measured pressure</li>
<li><code>QNH</code> current sea level pressure</li>
</ul>
<h4 id="returns">Returns<a class="headerlink" href="#returns" title="Permanent link">&para;</a></h4>
<p>altitude in meters of measurement point</p>
<h2 id="bme280baro">bme280.baro()<a class="headerlink" href="#bme280baro" title="Permanent link">&para;</a></h2>
<p>Reads the sensor and returns the air pressure in hectopascals as an integer multiplied with 1000 or <code>nil</code> when readout is not successful.
Current temperature is needed to calculate the air pressure so temperature reading is performed prior reading pressure data. Second returned variable is therefore current air temperature.</p>
<h4 id="syntax_1">Syntax<a class="headerlink" href="#syntax_1" title="Permanent link">&para;</a></h4>
<p><code>bme280.baro()</code></p>
<h4 id="parameters_1">Parameters<a class="headerlink" href="#parameters_1" title="Permanent link">&para;</a></h4>
<p>none</p>
<h4 id="returns_1">Returns<a class="headerlink" href="#returns_1" title="Permanent link">&para;</a></h4>
<ul>
<li><code>P</code> air pressure in hectopascals multiplied by 1000</li>
<li><code>T</code> temperature in celsius as an integer multiplied with 100</li>
</ul>
<h2 id="bme280dewpoint">bme280.dewpoint()<a class="headerlink" href="#bme280dewpoint" title="Permanent link">&para;</a></h2>
<p>For given temperature and relative humidity returns the dew point in celsius as an integer multiplied with 100.</p>
<h4 id="syntax_2">Syntax<a class="headerlink" href="#syntax_2" title="Permanent link">&para;</a></h4>
<p><code>bme280.dewpoint(H, T)</code></p>
<h4 id="parameters_2">Parameters<a class="headerlink" href="#parameters_2" title="Permanent link">&para;</a></h4>
<ul>
<li><code>H</code> relative humidity in percent multiplied by 1000.</li>
<li><code>T</code> temperate in celsius multiplied by 100.</li>
</ul>
<h4 id="returns_2">Returns<a class="headerlink" href="#returns_2" title="Permanent link">&para;</a></h4>
<p>dew point in celsisus</p>
<h2 id="bme280humi">bme280.humi()<a class="headerlink" href="#bme280humi" title="Permanent link">&para;</a></h2>
<p>Reads the sensor and returns the air relative humidity in percents as an integer multiplied with 100 or <code>nil</code> when readout is not successful.
Current temperature is needed to calculate the relative humidity so temperature reading is performed prior reading pressure data. Second returned variable is therefore current temperature.</p>
<h4 id="syntax_3">Syntax<a class="headerlink" href="#syntax_3" title="Permanent link">&para;</a></h4>
<p><code>bme280.humi()</code></p>
<h4 id="parameters_3">Parameters<a class="headerlink" href="#parameters_3" title="Permanent link">&para;</a></h4>
<p>none</p>
<h4 id="returns_3">Returns<a class="headerlink" href="#returns_3" title="Permanent link">&para;</a></h4>
<ul>
<li><code>H</code> last relative humidity reading in % times 1000</li>
<li><code>T</code> temperature in celsius as an integer multiplied with 100</li>
</ul>
<h2 id="bme280init">bme280.init()<a class="headerlink" href="#bme280init" title="Permanent link">&para;</a></h2>
<p>Initializes module. Initialization is mandatory before read values.</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>This function is deprecated and will be removed in upcoming releases. Use <code>bme280.setup()</code> instead.</p>
</div>
<h4 id="syntax_4">Syntax<a class="headerlink" href="#syntax_4" title="Permanent link">&para;</a></h4>
<p><code>bme280.init(sda, scl, [temp_oss, press_oss, humi_oss, power_mode, inactive_duration, IIR_filter])</code></p>
<h4 id="parameters_4">Parameters<a class="headerlink" href="#parameters_4" title="Permanent link">&para;</a></h4>
<p>See <a href="#bme280setup"><code>setup()</code></a>.</p>
<h2 id="bme280qfe2qnh">bme280.qfe2qnh()<a class="headerlink" href="#bme280qfe2qnh" title="Permanent link">&para;</a></h2>
<p>For given altitude converts the air pressure to sea level air pressure.</p>
<h4 id="syntax_5">Syntax<a class="headerlink" href="#syntax_5" title="Permanent link">&para;</a></h4>
<p><code>bme280.qfe2qnh(P, altitude)</code></p>
<h4 id="parameters_5">Parameters<a class="headerlink" href="#parameters_5" title="Permanent link">&para;</a></h4>
<ul>
<li><code>P</code> measured pressure</li>
<li><code>altitude</code> altitude in meters of measurement point</li>
</ul>
<h4 id="returns_4">Returns<a class="headerlink" href="#returns_4" title="Permanent link">&para;</a></h4>
<p>sea level pressure</p>
<h2 id="bme280read">bme280.read()<a class="headerlink" href="#bme280read" title="Permanent link">&para;</a></h2>
<p>Reads the sensor and returns the temperature, the air pressure, the air relative humidity and </p>
<h4 id="syntax_6">Syntax<a class="headerlink" href="#syntax_6" title="Permanent link">&para;</a></h4>
<p><code>bme280.read([altitude])</code></p>
<h4 id="parameters_6">Parameters<a class="headerlink" href="#parameters_6" title="Permanent link">&para;</a></h4>
<ul>
<li>(optional) <code>altitude</code>- altitude in meters of measurement point. If provided also the air pressure converted to sea level air pressure is returned.</li>
</ul>
<h4 id="returns_5">Returns<a class="headerlink" href="#returns_5" title="Permanent link">&para;</a></h4>
<ul>
<li><code>T</code> temperature in celsius as an integer multiplied with 100</li>
<li><code>P</code> air pressure in hectopascals multiplied by 1000</li>
<li><code>H</code> relative humidity in percent multiplied by 1000</li>
<li><code>QNH</code> air pressure in hectopascals multiplied by 1000 converted to sea level</li>
</ul>
<p>Any of these variables is <code>nil</code> if the readout of given measure was not successful.</p>
<h2 id="bme280startreadout">bme280.startreadout()<a class="headerlink" href="#bme280startreadout" title="Permanent link">&para;</a></h2>
<p>Starts readout (turns the sensor into forced mode). After the readout the sensor turns to sleep mode.</p>
<h4 id="syntax_7">Syntax<a class="headerlink" href="#syntax_7" title="Permanent link">&para;</a></h4>
<p><code>bme280.startreadout(delay, callback)</code></p>
<h4 id="parameters_7">Parameters<a class="headerlink" href="#parameters_7" title="Permanent link">&para;</a></h4>
<ul>
<li><code>delay</code> sets sensor to forced mode and calls the <code>callback</code> (if provided) after given number of milliseconds. For 0 the default delay is set to 113ms (sufficient time to perform reading for oversampling settings 16x). For different oversampling setting please refer to <a href="http://ae-bst.resource.bosch.com/media/_tech/media/datasheets/BST-BME280_DS001-11.pdf#page=51">BME280 Final Datasheet - Appendix B: Measurement time and current calculation</a>.</li>
<li><code>callback</code> if provided it will be invoked after given <code>delay</code>. The sensor reading should be finalized by then so.</li>
</ul>
<h4 id="returns_6">Returns<a class="headerlink" href="#returns_6" title="Permanent link">&para;</a></h4>
<p><code>nil</code></p>
<h2 id="bme280setup">bme280.setup()<a class="headerlink" href="#bme280setup" title="Permanent link">&para;</a></h2>
<p>Initializes module. Initialization is mandatory before read values.</p>
<h4 id="syntax_8">Syntax<a class="headerlink" href="#syntax_8" title="Permanent link">&para;</a></h4>
<p><code>bme280.setup([temp_oss, press_oss, humi_oss, power_mode, inactive_duration, IIR_filter])</code></p>
<h4 id="parameters_8">Parameters<a class="headerlink" href="#parameters_8" title="Permanent link">&para;</a></h4>
<ul>
<li>(optional) <code>temp_oss</code> - Controls oversampling of temperature data. Default oversampling is 16x.</li>
<li>(optional) <code>press_oss</code> - Controls oversampling of pressure data. Default oversampling is 16x.</li>
<li>(optional) <code>humi_oss</code> - Controls oversampling of humidity data. Default oversampling is 16x</li>
<li>(optional) <code>sensor_mode</code> - Controls the sensor mode of the device. Default sensor more is normal.</li>
<li>(optional) <code>inactive_duration</code> - Controls inactive duration in normal mode. Default inactive duration is 20ms.</li>
<li>(optional) <code>IIR_filter</code> - Controls the time constant of the IIR filter. Default fitler coefficient is 16.</li>
<li>(optional) <code>cold_start</code> - If 0 then the BME280 chip is not initialised. Usefull in a battery operated setup when the ESP deep sleeps and on wakeup needs to initialise the driver (the module) but not the chip itself. The chip was kept powered (sleeping too) and is holding the latest reading that should be fetched quickly before another reading starts (<code>bme280.startreadout()</code>). By default the chip is initialised.</li>
</ul>
<table>
<thead>
<tr>
<th><code>temp_oss</code>, <code>press_oss</code>, <code>humi_oss</code></th>
<th>Data oversampling</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Skipped (output set to 0x80000)</td>
</tr>
<tr>
<td>1</td>
<td>oversampling ×1</td>
</tr>
<tr>
<td>2</td>
<td>oversampling ×2</td>
</tr>
<tr>
<td>3</td>
<td>oversampling ×4</td>
</tr>
<tr>
<td>4</td>
<td>oversampling ×8</td>
</tr>
<tr>
<td><strong>5</strong></td>
<td><strong>oversampling ×16</strong></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th><code>sensor_mode</code></th>
<th>Sensor mode</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Sleep mode</td>
</tr>
<tr>
<td>1 and 2</td>
<td>Forced mode</td>
</tr>
<tr>
<td><strong>3</strong></td>
<td><strong>Normal mode</strong></td>
</tr>
</tbody>
</table>
<p>Using forced mode is recommended for applications which require low sampling rate or hostbased synchronization. The sensor enters into sleep mode after a forced readout. Please refer to BME280 Final Datasheet for more details.</p>
<table>
<thead>
<tr>
<th><code>inactive_duration</code></th>
<th>t standby (ms)</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0.5</td>
</tr>
<tr>
<td>1</td>
<td>62.5</td>
</tr>
<tr>
<td>2</td>
<td>125</td>
</tr>
<tr>
<td>3</td>
<td>250</td>
</tr>
<tr>
<td>4</td>
<td>500</td>
</tr>
<tr>
<td>5</td>
<td>1000</td>
</tr>
<tr>
<td>6</td>
<td>10</td>
</tr>
<tr>
<td><strong>7</strong></td>
<td><strong>20</strong></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th><code>IIR_filter</code></th>
<th>Filter coefficient</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Filter off</td>
</tr>
<tr>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>2</td>
<td>4</td>
</tr>
<tr>
<td>3</td>
<td>8</td>
</tr>
<tr>
<td><strong>4</strong></td>
<td><strong>16</strong></td>
</tr>
</tbody>
</table>
<h4 id="returns_7">Returns<a class="headerlink" href="#returns_7" title="Permanent link">&para;</a></h4>
<p><code>nil</code> if initialization has failed (no sensor connected?), <code>2</code> if sensor is BME280, <code>1</code> if sensor is BMP280</p>
<h4 id="example">Example<a class="headerlink" href="#example" title="Permanent link">&para;</a></h4>
<pre><code class="lua">alt=320 -- altitude of the measurement place

sda, scl = 3, 4
i2c.setup(0, sda, scl, i2c.SLOW) -- call i2c.setup() only once
bme280.setup()

P, T = bme280.baro()
print(string.format(&quot;QFE=%d.%03d&quot;, P/1000, P%1000))

-- convert measure air pressure to sea level pressure
QNH = bme280.qfe2qnh(P, alt)
print(string.format(&quot;QNH=%d.%03d&quot;, QNH/1000, QNH%1000))

H, T = bme280.humi()

local Tsgn = (T &lt; 0 and -1 or 1); T = Tsgn*T
print(string.format(&quot;T=%s%d.%02d&quot;, Tsgn&lt;0 and &quot;-&quot; or &quot;&quot;, T/100, T%100))
print(string.format(&quot;humidity=%d.%03d%%&quot;, H/1000, H%1000))

D = bme280.dewpoint(H, T)
local Dsgn = (D &lt; 0 and -1 or 1); D = Dsgn*D
print(string.format(&quot;dew_point=%s%d.%02d&quot;, Dsgn&lt;0 and &quot;-&quot; or &quot;&quot;, D/100, D%100))

-- altimeter function - calculate altitude based on current sea level pressure (QNH) and measure pressure
P = bme280.baro()
curAlt = bme280.altitude(P, QNH)
local curAltsgn = (curAlt &lt; 0 and -1 or 1); curAlt = curAltsgn*curAlt
print(string.format(&quot;altitude=%s%d.%02d&quot;, curAltsgn&lt;0 and &quot;-&quot; or &quot;&quot;, curAlt/100, curAlt%100))
</code></pre>

<p>Or simpler and more efficient</p>
<pre><code class="lua">alt=320 -- altitude of the measurement place

sda, scl = 3, 4
i2c.setup(0, sda, scl, i2c.SLOW) -- call i2c.setup() only once
bme280.setup()

T, P, H, QNH = bme280.read(alt)
local Tsgn = (T &lt; 0 and -1 or 1); T = Tsgn*T
print(string.format(&quot;T=%s%d.%02d&quot;, Tsgn&lt;0 and &quot;-&quot; or &quot;&quot;, T/100, T%100))
print(string.format(&quot;QFE=%d.%03d&quot;, P/1000, P%1000))
print(string.format(&quot;QNH=%d.%03d&quot;, QNH/1000, QNH%1000))
print(string.format(&quot;humidity=%d.%03d%%&quot;, H/1000, H%1000))
D = bme280.dewpoint(H, T)
local Dsgn = (D &lt; 0 and -1 or 1); D = Dsgn*D
print(string.format(&quot;dew_point=%s%d.%02d&quot;, Dsgn&lt;0 and &quot;-&quot; or &quot;&quot;, D/100, D%100))

-- altimeter function - calculate altitude based on current sea level pressure (QNH) and measure pressure
P = bme280.baro()
curAlt = bme280.altitude(P, QNH)
local curAltsgn = (curAlt &lt; 0 and -1 or 1); curAlt = curAltsgn*curAlt
print(string.format(&quot;altitude=%s%d.%02d&quot;, curAltsgn&lt;0 and &quot;-&quot; or &quot;&quot;, curAlt/100, curAlt%100))
</code></pre>

<p>Use <code>bme280.setup(1, 3, 0, 3, 0, 4)</code> for "game mode" - Oversampling settings  pressure ×4, temperature ×1, humidity ×0, sensor mode: normal mode, inactive duration  = 0.5 ms, IIR filter settings  filter coefficient 16.</p>
<p>Example of readout in forced mode (asynchronous)</p>
<pre><code class="lua">sda, scl = 3, 4
i2c.setup(0, sda, scl, i2c.SLOW) -- call i2c.setup() only once
bme280.setup(nil, nil, nil, 0) -- initialize to sleep mode
bme280.startreadout(0, function ()
  T, P = bme280.read()
  local Tsgn = (T &lt; 0 and -1 or 1); T = Tsgn*T
  print(string.format(&quot;T=%s%d.%02d&quot;, Tsgn&lt;0 and &quot;-&quot; or &quot;&quot;, T/100, T%100))
end)
</code></pre>

<h2 id="bme280temp">bme280.temp()<a class="headerlink" href="#bme280temp" title="Permanent link">&para;</a></h2>
<p>Reads the sensor and returns the temperature in celsius as an integer multiplied with 100.</p>
<h4 id="syntax_9">Syntax<a class="headerlink" href="#syntax_9" title="Permanent link">&para;</a></h4>
<p><code>bme280.temp()</code></p>
<h4 id="parameters_9">Parameters<a class="headerlink" href="#parameters_9" title="Permanent link">&para;</a></h4>
<p>none</p>
<h4 id="returns_8">Returns<a class="headerlink" href="#returns_8" title="Permanent link">&para;</a></h4>
<ul>
<li><code>T</code> temperature in celsius as an integer multiplied with 100 or <code>nil</code> when readout is not successful</li>
<li><code>t_fine</code> temperature measure used in pressure and humidity compensation formulas (generally no need to use this value)</li>
</ul>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../bmp085/" class="btn btn-neutral float-right" title="bmp085">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../bit/" class="btn btn-neutral" title="bit"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/nodemcu/nodemcu-firmware/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../bit/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../bmp085/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../../..';</script>
    <script src="../../../js/theme.js"></script>
      <script src="../../../js/extra.js"></script>
      <script src="../../../search/require.js"></script>
      <script src="../../../search/search.js"></script>

</body>
</html>
