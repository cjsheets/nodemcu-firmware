<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../../img/favicon.ico">
  <title>sjson - NodeMCU Documentation</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>
  <link href='https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../../css/highlight.css">
  <link href="../../../css/extra.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "sjson";
    var mkdocs_page_input_path = "en/modules/sjson.md";
    var mkdocs_page_url = "/en/modules/sjson/";
  </script>
  
  <script src="../../../js/jquery-2.1.1.min.js"></script>
  <script src="../../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../../.." class="icon icon-home"> NodeMCU Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	  
          
		  
  <ul class="" href="../../..">
    <li class="toctree-l1">
  <a class="" href="../../..">Overview</a>
  </li></ul>
          
		  
  <p class="caption">English</p>
  <ul class="current">
          <li class="toctree-l1">
            
  <a class="" href="../../">Home</a>
        </li>
          <li class="toctree-l1">
            
  <a class="" href="../../build/">Building the firmware</a>
        </li>
          <li class="toctree-l1">
            
  <a class="" href="../../flash/">Flashing the firmware</a>
        </li>
          <li class="toctree-l1">
            
  <a class="" href="../../spiffs/">Internal filesystem notes</a>
        </li>
          <li class="toctree-l1">
            
  <a class="" href="../../sdcard/">Filesystem on SD card</a>
        </li>
          <li class="toctree-l1">
            
  <a class="" href="../../upload/">Uploading code</a>
        </li>
          <li class="toctree-l1">
            
  <a class="" href="/en/lua-developer-faq">FAQs</a>
        </li>
          <li class="toctree-l1">
            
  <a class="" href="../../support/">Support</a>
        </li>
          <li class="toctree-l1 current">
            
  <a class="current" href="/en/modules/adc">Modules</a>
  <ul class="subnav">
        <li class="toctree-l2 1">
            
  <a class="" href="../adc/">adc</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../ads1115/">ads1115</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../adxl345/">adxl345</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../am2320/">am2320</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../apa102/">apa102</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../bit/">bit</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../bme280/">bme280</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../bmp085/">bmp085</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../cjson/">cjson</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../coap/">coap</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../cron/">cron</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../crypto/">crypto</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../dht/">dht</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../ds18b20/">ds18b20</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../encoder/">encoder</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../enduser-setup/">enduser setup</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../file/">file</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../gdbstub/">gdbstub</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../gpio/">gpio</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../hdc1080/">hdc1080</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../hmc5883l/">hmc5883l</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../http/">http</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../hx711/">hx711</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../i2c/">i2c</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../l3g4200d/">l3g4200d</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../mcp4725/">mcp4725</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../mdns/">mdns</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../mqtt/">mqtt</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../net/">net</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../node/">node</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../ow/">ow (1-Wire)</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../pcm/">pcm</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../perf/">perf</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../pwm/">pwm</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../rc/">rc</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../rfswitch/">rfswitch</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../rotary/">rotary</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../rtcfifo/">rtcfifo</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../rtcmem/">rtcmem</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../rtctime/">rtctime</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../si7021/">si7021</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../sigma-delta/">sigma delta</a>
        </li>
        <li class="toctree-l2 current 1">
            
  <a class="current" href="./">sjson</a>
  <ul class="subnav">
      
  <li class="toctree-l2 current">
  
    <a class="current"  href="#sjson-module">SJSON Module</a>
  
  
    <ul class="">
    
        <li class="toctree-l3 toc-item" >
          <a class="toctree-l3" href="#sjsonencoder">sjson.encoder()</a>
        </li>
    
        <li class="toctree-l3 toc-item" >
          <a class="toctree-l3" href="#sjsonencoderread">sjson.encoder:read</a>
        </li>
    
        <li class="toctree-l3 toc-item" >
          <a class="toctree-l3" href="#sjsonencode">sjson.encode()</a>
        </li>
    
        <li class="toctree-l3 toc-item" >
          <a class="toctree-l3" href="#sjsondecoder">sjson.decoder()</a>
        </li>
    
        <li class="toctree-l3 toc-item" >
          <a class="toctree-l3" href="#sjsondecoderwrite">sjson.decoder:write</a>
        </li>
    
        <li class="toctree-l3 toc-item" >
          <a class="toctree-l3" href="#sjsondecoderresult">sjson.decoder:result</a>
        </li>
    
        <li class="toctree-l3 toc-item" >
          <a class="toctree-l3" href="#sjsondecode">sjson.decode()</a>
        </li>
    
        <li class="toctree-l3 toc-item" >
          <a class="toctree-l3" href="#constants">Constants</a>
        </li>
    
    </ul>
  
  </li>

  </ul>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../sntp/">sntp</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../somfy/">somfy</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../spi/">spi</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../struct/">struct</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../switec/">switec</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../tcs34725/">tcs34725</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../tls/">tls</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../tm1829/">tm1829</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../tmr/">tmr</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../tsl2561/">tsl2561</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../u8g/">u8g</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../uart/">uart</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../ucg/">ucg</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../websocket/">websocket</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../wifi/">wifi</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../wps/">wps</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../ws2801/">ws2801</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../ws2812/">ws2812</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../xpt2046/">xpt2046</a>
        </li>
  </ul>
        </li>
  </ul>

          
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../..">NodeMCU Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../..">Docs</a> &raquo;</li>
    
      
        
          <li>English &raquo;</li>
        
      
        
          <li>Modules &raquo;</li>
        
      
    
    <li>sjson</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/nodemcu/nodemcu-firmware/edit/master/docs/en/modules/sjson.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="sjson-module">SJSON Module<a class="headerlink" href="#sjson-module" title="Permanent link">&para;</a></h1>
<table>
<thead>
<tr>
<th align="left">Since</th>
<th align="left">Origin / Contributor</th>
<th align="left">Maintainer</th>
<th align="left">Source</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">2017-02-01</td>
<td align="left"><a href="https://github.com/pjsg">Philip Gladstone</a></td>
<td align="left"><a href="https://github.com/pjsg">Philip Gladstone</a></td>
<td align="left"><a href="../../../../app/modules/sjson.c">sjson</a></td>
</tr>
</tbody>
</table>
<p>The JSON support module. Allows encoding and decoding to/from JSON.</p>
<p>Please note that nested tables can require a lot of memory to encode. To catch out-of-memory errors, use <code>pcall()</code>.</p>
<p>This code using the streaming json library <a href="https://github.com/mnunberg/jsonsl">jsonsl</a> to do the parsing of the string.</p>
<p>This module can be used in two ways. The simpler way is to use it as a direct drop-in for cjson (you can just do <code>_G.cjson = sjson</code>). 
The more advanced approach is to use the streaming interface. This allows encoding and decoding of significantly larger objects.</p>
<p>The handling of json null is as follows:</p>
<ul>
<li>By default, the decoder represents null as sjson.NULL (which is a userdata object). This is the behavior of cjson.</li>
<li>The encoder always converts any userdata object into null.</li>
<li>Optionally, a single string can be specified in both the encoder and decoder. This string will be used in encoding/decoding to represent json null values. This string should not be used
anywhere else in your data structures. A suitable value might be <code>"\0"</code>.</li>
</ul>
<p>When encoding a lua object, if a function is found, then it is invoked (with no arguments) and the (single) returned value is encoded in the place of the function.</p>
<h2 id="sjsonencoder">sjson.encoder()<a class="headerlink" href="#sjsonencoder" title="Permanent link">&para;</a></h2>
<p>This creates an encoder object that can convert a LUA object into a JSON encoded string.</p>
<h4 id="syntax">Syntax<a class="headerlink" href="#syntax" title="Permanent link">&para;</a></h4>
<p><code>sjson.encoder(table [, opts])</code></p>
<h4 id="parameters">Parameters<a class="headerlink" href="#parameters" title="Permanent link">&para;</a></h4>
<ul>
<li><code>table</code> data to encode</li>
<li><code>opts</code> an optional table of options. The possible entries are:</li>
<li><code>depth</code> the maximum encoding depth needed to encode the table. The default is 20 which should be enough for nearly all situations.</li>
<li><code>null</code> the string value to treat as null.</li>
</ul>
<h4 id="returns">Returns<a class="headerlink" href="#returns" title="Permanent link">&para;</a></h4>
<p>A <code>sjson.encoder</code> object.</p>
<h2 id="sjsonencoderread">sjson.encoder:read<a class="headerlink" href="#sjsonencoderread" title="Permanent link">&para;</a></h2>
<p>This gets a chunk of JSON encoded data.</p>
<h4 id="syntax_1">Syntax<a class="headerlink" href="#syntax_1" title="Permanent link">&para;</a></h4>
<p><code>encoder:read([size])</code></p>
<h4 id="parameters_1">Parameters<a class="headerlink" href="#parameters_1" title="Permanent link">&para;</a></h4>
<ul>
<li><code>size</code> an optional value for the number of bytes to return. The default is 1024.</li>
</ul>
<h4 id="returns_1">Returns<a class="headerlink" href="#returns_1" title="Permanent link">&para;</a></h4>
<p>A string of up to <code>size</code> bytes, or <code>nil</code> if the encoding is complete and all data has been returned.</p>
<h4 id="example">Example<a class="headerlink" href="#example" title="Permanent link">&para;</a></h4>
<p>The following example prints out (in 64 byte chunks) a JSON encoded string containing the first 4k of every file in the file system. The total string
can be bigger than the total amount of memory on the NodeMCU.</p>
<pre><code>function files() 
   result = {}
   for k,v in pairs(file.list()) do
     result[k] = function() return file.open(k):read(4096) end
   end
   return result
end

local encoder = sjson.encoder(files())

while true do
   data = encoder:read(64)
   if not data then
      break
   end
   print(data)
end
</code></pre>

<h2 id="sjsonencode">sjson.encode()<a class="headerlink" href="#sjsonencode" title="Permanent link">&para;</a></h2>
<p>Encode a Lua table to a JSON string. This is a convenience method provided for backwards compatibility with <code>cjson</code>.</p>
<h4 id="syntax_2">Syntax<a class="headerlink" href="#syntax_2" title="Permanent link">&para;</a></h4>
<p><code>sjson.encode(table [, opts])</code></p>
<h4 id="parameters_2">Parameters<a class="headerlink" href="#parameters_2" title="Permanent link">&para;</a></h4>
<ul>
<li><code>table</code> data to encode</li>
<li><code>opts</code> an optional table of options. The possible entries are:<ul>
<li><code>depth</code> the maximum encoding depth needed to encode the table. The default is 20 which should be enough for nearly all situations.</li>
<li><code>null</code> the string value to treat as null.</li>
</ul>
</li>
</ul>
<h4 id="returns_2">Returns<a class="headerlink" href="#returns_2" title="Permanent link">&para;</a></h4>
<p>JSON string</p>
<h4 id="example_1">Example<a class="headerlink" href="#example_1" title="Permanent link">&para;</a></h4>
<pre><code class="lua">ok, json = pcall(sjson.encode, {key=&quot;value&quot;})
if ok then
  print(json)
else
  print(&quot;failed to encode!&quot;)
end
</code></pre>

<h2 id="sjsondecoder">sjson.decoder()<a class="headerlink" href="#sjsondecoder" title="Permanent link">&para;</a></h2>
<p>This makes a decoder object that can parse a JSON encoded string into a lua object. A metatable can be specified for all the newly created lua tables. This allows
you to handle each value as it is inserted into each table (by implementing the <code>__newindex</code> method).</p>
<h4 id="syntax_3">Syntax<a class="headerlink" href="#syntax_3" title="Permanent link">&para;</a></h4>
<p><code>sjson.decoder([opts])</code></p>
<h4 id="parameters_3">Parameters<a class="headerlink" href="#parameters_3" title="Permanent link">&para;</a></h4>
<ul>
<li><code>opts</code> an optional table of options. The possible entries are:<ul>
<li><code>depth</code> the maximum encoding depth needed to encode the table. The default is 20 which should be enough for nearly all situations.</li>
<li><code>null</code> the string value to treat as null.</li>
<li><code>metatable</code> a table to use as the metatable for all the new tables in the returned object.</li>
</ul>
</li>
</ul>
<h4 id="returns_3">Returns<a class="headerlink" href="#returns_3" title="Permanent link">&para;</a></h4>
<p>A <code>sjson.decoder</code> object</p>
<h4 id="metatable">Metatable<a class="headerlink" href="#metatable" title="Permanent link">&para;</a></h4>
<p>There are two principal methods that are invoked in the metatable (if it is present).</p>
<ul>
<li><code>__newindex</code> this is the standard method invoked whenever a new table element is created.</li>
<li><code>checkpath</code> this is invoked (if defined) whenever a new table is created. It is invoked with two arguments:<ul>
<li><code>table</code> this is the newly created table</li>
<li><code>path</code> this is a list of the keys from the root. 
It must return <code>true</code> if this object is wanted in the result, or <code>false</code> otherwise.</li>
</ul>
</li>
</ul>
<p>For example, when decoding <code>{ "foo": [1, 2, []] }</code> the checkpath will be invoked as follows:</p>
<ul>
<li><code>checkpath({}, {})</code> the <code>table</code> argument is the object that will correspond with the value of the JSON object.</li>
<li><code>checkpath({}, {"foo"})</code> the <code>table</code> argument is the object that will correspond with the value of the outer JSON array.</li>
<li><code>checkpath({}, {"foo", 3})</code> the <code>table</code> argument is the object that will correspond to the empty inner JSON array.</li>
</ul>
<p>When the <code>checkpath</code> method is called, the metatable has already be associated with the new table. Thus the <code>checkpath</code> method can replace it
if desired. For example, if you are decoding <code>{ "foo": { "bar": [1,2,3,4], "cat": [5] } }</code> and, for some reason, you did not want to capture the
value of the <code>"bar"</code> key, then there are various ways to do this:</p>
<ul>
<li>
<p>In the <code>__newindex</code> metamethod, just check for the value of the key and skip the <code>rawset</code> if the key is <code>"bar"</code>. This only works if you want to skip all the 
<code>"bar"</code> keys.</p>
</li>
<li>
<p>In the <code>checkpath</code> method, if the path is <code>["foo"]</code>, then return <code>false</code>.</p>
</li>
<li>
<p>Use the following <code>checkpath</code>:  <code>checkpath=function(tab, path) tab['__json_path'] = path return true end</code> This will save the path in each constructed object. Now the <code>__newindex</code> method can perform more sophisticated filtering.</p>
</li>
</ul>
<p>The reason for being able to filter is that it enables processing of very large JSON responses on a memory constrained platform. Many APIs return lots of information
which would exceed the memory budget of the platform. For example, <code>https://api.github.com/repos/nodemcu/nodemcu-firmware/contents</code> is over 13kB, and yet, if 
you only need the <code>download_url</code> keys, then the total size is around 600B. This can be handled with a simple <code>__newindex</code> method. </p>
<h2 id="sjsondecoderwrite">sjson.decoder:write<a class="headerlink" href="#sjsondecoderwrite" title="Permanent link">&para;</a></h2>
<p>This provides more data to be parsed into the lua object.</p>
<h4 id="syntax_4">Syntax<a class="headerlink" href="#syntax_4" title="Permanent link">&para;</a></h4>
<p><code>decoder:write(string)</code></p>
<h4 id="parameters_4">Parameters<a class="headerlink" href="#parameters_4" title="Permanent link">&para;</a></h4>
<ul>
<li><code>string</code> the next piece of JSON encoded data</li>
</ul>
<h4 id="returns_4">Returns<a class="headerlink" href="#returns_4" title="Permanent link">&para;</a></h4>
<p>The constructed lua object or <code>nil</code> if the decode is not yet complete.</p>
<h4 id="errors">Errors<a class="headerlink" href="#errors" title="Permanent link">&para;</a></h4>
<p>If a parse error occurrs during this decode, then an error is thrown and the parse is aborted. The object cannot be used again.</p>
<h2 id="sjsondecoderresult">sjson.decoder:result<a class="headerlink" href="#sjsondecoderresult" title="Permanent link">&para;</a></h2>
<p>This gets the decoded lua object, or raises an error if the decode is not yet complete. This can be called multiple times and will return the 
same object each time.</p>
<h4 id="syntax_5">Syntax<a class="headerlink" href="#syntax_5" title="Permanent link">&para;</a></h4>
<p><code>decoder:result()</code></p>
<h4 id="errors_1">Errors<a class="headerlink" href="#errors_1" title="Permanent link">&para;</a></h4>
<p>If the decode is not complete, then an error is thrown.</p>
<h4 id="example_2">Example<a class="headerlink" href="#example_2" title="Permanent link">&para;</a></h4>
<pre><code>local decoder = sjson.decoder()

decoder:write(&quot;[10, 1&quot;)
decoder:write(&quot;1&quot;)
decoder:write(&quot;, \&quot;foo\&quot;]&quot;)

for k,v in pairs(decoder:result()) do
   print (k, v)
end
</code></pre>

<p>The next example demonstrates the use of the metatable argument. In this case it just prints out the operations, but it could suppress the assignment
altogether if desired.</p>
<pre><code>local decoder = sjson.decoder({metatable=
        {__newindex=function(t,k,v) print(&quot;Setting '&quot; .. k .. &quot;' = '&quot; .. tostring(v) ..&quot;'&quot;) 
                                    rawset(t,k,v) end}})

decoder:write('[1, 2, {&quot;foo&quot;:&quot;bar&quot;}]')

</code></pre>

<h2 id="sjsondecode">sjson.decode()<a class="headerlink" href="#sjsondecode" title="Permanent link">&para;</a></h2>
<p>Decode a JSON string to a Lua table. This is a convenience method provided for backwards compatibility with <code>cjson</code>.</p>
<h4 id="syntax_6">Syntax<a class="headerlink" href="#syntax_6" title="Permanent link">&para;</a></h4>
<p><code>sjson.decode(str[, opts])</code></p>
<h4 id="parameters_5">Parameters<a class="headerlink" href="#parameters_5" title="Permanent link">&para;</a></h4>
<ul>
<li><code>str</code> JSON string to decode</li>
<li><code>opts</code> an optional table of options. The possible entries are:<ul>
<li><code>depth</code> the maximum encoding depth needed to encode the table. The default is 20 which should be enough for nearly all situations.</li>
<li><code>null</code> the string value to treat as null.</li>
<li><code>metatable</code> a table to use as the metatable for all the new tables in the returned object. See the metatable section in the description of <code>sjson.decoder()</code> above.</li>
</ul>
</li>
</ul>
<h4 id="returns_5">Returns<a class="headerlink" href="#returns_5" title="Permanent link">&para;</a></h4>
<p>Lua table representation of the JSON data</p>
<h4 id="errors_2">Errors<a class="headerlink" href="#errors_2" title="Permanent link">&para;</a></h4>
<p>If the string is not valid JSON, then an error is thrown.</p>
<h4 id="example_3">Example<a class="headerlink" href="#example_3" title="Permanent link">&para;</a></h4>
<pre><code class="lua">t = sjson.decode('{&quot;key&quot;:&quot;value&quot;}')
for k,v in pairs(t) do print(k,v) end
</code></pre>

<h2 id="constants">Constants<a class="headerlink" href="#constants" title="Permanent link">&para;</a></h2>
<p>There is one constant -- <code>sjson.NULL</code> -- which is used in lua structures to represent the presence of a JSON null.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../sntp/" class="btn btn-neutral float-right" title="sntp">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../sigma-delta/" class="btn btn-neutral" title="sigma delta"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/nodemcu/nodemcu-firmware/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../sigma-delta/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../sntp/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../../..';</script>
    <script src="../../../js/theme.js"></script>
      <script src="../../../js/extra.js"></script>
      <script src="../../../search/require.js"></script>
      <script src="../../../search/search.js"></script>

</body>
</html>
