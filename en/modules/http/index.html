<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../../img/favicon.ico">
  <title>http - NodeMCU Documentation</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>
  <link href='https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../../css/highlight.css">
  <link href="../../../css/extra.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "http";
    var mkdocs_page_input_path = "en/modules/http.md";
    var mkdocs_page_url = "/en/modules/http/";
  </script>
  
  <script src="../../../js/jquery-2.1.1.min.js"></script>
  <script src="../../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../../.." class="icon icon-home"> NodeMCU Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	  
          
		  
  <ul class="" href="../../..">
    <li class="toctree-l1">
  <a class="" href="../../..">Overview</a>
  </li></ul>
          
		  
  <p class="caption">English</p>
  <ul class="current">
          <li class="toctree-l1">
            
  <a class="" href="../../">Home</a>
        </li>
          <li class="toctree-l1">
            
  <a class="" href="../../build/">Building the firmware</a>
        </li>
          <li class="toctree-l1">
            
  <a class="" href="../../flash/">Flashing the firmware</a>
        </li>
          <li class="toctree-l1">
            
  <a class="" href="../../spiffs/">Internal filesystem notes</a>
        </li>
          <li class="toctree-l1">
            
  <a class="" href="../../sdcard/">Filesystem on SD card</a>
        </li>
          <li class="toctree-l1">
            
  <a class="" href="../../upload/">Uploading code</a>
        </li>
          <li class="toctree-l1">
            
  <a class="" href="/en/lua-developer-faq">FAQs</a>
        </li>
          <li class="toctree-l1">
            
  <a class="" href="../../support/">Support</a>
        </li>
          <li class="toctree-l1 current">
            
  <a class="current" href="/en/modules/adc">Modules</a>
  <ul class="subnav">
        <li class="toctree-l2 1">
            
  <a class="" href="../adc/">adc</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../ads1115/">ads1115</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../adxl345/">adxl345</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../am2320/">am2320</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../apa102/">apa102</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../bit/">bit</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../bme280/">bme280</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../bmp085/">bmp085</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../cjson/">cjson</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../coap/">coap</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../cron/">cron</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../crypto/">crypto</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../dht/">dht</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../ds18b20/">ds18b20</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../encoder/">encoder</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../enduser-setup/">enduser setup</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../file/">file</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../gdbstub/">gdbstub</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../gpio/">gpio</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../hdc1080/">hdc1080</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../hmc5883l/">hmc5883l</a>
        </li>
        <li class="toctree-l2 current 1">
            
  <a class="current" href="./">http</a>
  <ul class="subnav">
      
  <li class="toctree-l2 current">
  
    <a class="current"  href="#http-module">HTTP Module</a>
  
  
    <ul class="">
    
        <li class="toctree-l3 toc-item" >
          <a class="toctree-l3" href="#httpdelete">http.delete()</a>
        </li>
    
        <li class="toctree-l3 toc-item" >
          <a class="toctree-l3" href="#httpget">http.get()</a>
        </li>
    
        <li class="toctree-l3 toc-item" >
          <a class="toctree-l3" href="#httppost">http.post()</a>
        </li>
    
        <li class="toctree-l3 toc-item" >
          <a class="toctree-l3" href="#httpput">http.put()</a>
        </li>
    
        <li class="toctree-l3 toc-item" >
          <a class="toctree-l3" href="#httprequest">http.request()</a>
        </li>
    
    </ul>
  
  </li>

  </ul>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../hx711/">hx711</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../i2c/">i2c</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../l3g4200d/">l3g4200d</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../mcp4725/">mcp4725</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../mdns/">mdns</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../mqtt/">mqtt</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../net/">net</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../node/">node</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../ow/">ow (1-Wire)</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../pcm/">pcm</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../perf/">perf</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../pwm/">pwm</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../rc/">rc</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../rfswitch/">rfswitch</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../rotary/">rotary</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../rtcfifo/">rtcfifo</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../rtcmem/">rtcmem</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../rtctime/">rtctime</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../si7021/">si7021</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../sigma-delta/">sigma delta</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../sjson/">sjson</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../sntp/">sntp</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../somfy/">somfy</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../spi/">spi</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../struct/">struct</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../switec/">switec</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../tcs34725/">tcs34725</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../tls/">tls</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../tm1829/">tm1829</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../tmr/">tmr</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../tsl2561/">tsl2561</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../u8g/">u8g</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../uart/">uart</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../ucg/">ucg</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../websocket/">websocket</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../wifi/">wifi</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../wps/">wps</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../ws2801/">ws2801</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../ws2812/">ws2812</a>
        </li>
        <li class="toctree-l2 1">
            
  <a class="" href="../xpt2046/">xpt2046</a>
        </li>
  </ul>
        </li>
  </ul>

          
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../..">NodeMCU Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../..">Docs</a> &raquo;</li>
    
      
        
          <li>English &raquo;</li>
        
      
        
          <li>Modules &raquo;</li>
        
      
    
    <li>http</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/nodemcu/nodemcu-firmware/edit/master/docs/en/modules/http.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="http-module">HTTP Module<a class="headerlink" href="#http-module" title="Permanent link">&para;</a></h1>
<table>
<thead>
<tr>
<th align="left">Since</th>
<th align="left">Origin / Contributor</th>
<th align="left">Maintainer</th>
<th align="left">Source</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">2016-01-15</td>
<td align="left"><a href="https://github.com/Caerbannog/esphttpclient">esphttpclient</a> / <a href="https://github.com/vowstar">Vowstar</a></td>
<td align="left"><a href="https://github.com/vowstar">Vowstar</a></td>
<td align="left"><a href="../../../../app/modules/http.c">http.c</a></td>
</tr>
</tbody>
</table>
<p>Basic HTTP <em>client</em> module that provides an interface to do GET/POST/PUT/DELETE over HTTP(S), as well as customized requests. Due to the memory constraints on ESP8266, the supported page/body size is limited by available memory. Attempting to receive pages larger than this will fail. If larger page/body sizes are necessary, consider using <a href="../net/#netcreateconnection"><code>net.createConnection()</code></a> and stream in the data.</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>It is <strong>not</strong> possible to execute concurrent HTTP requests using this module. </p>
</div>
<p>Each request method takes a callback which is invoked when the response has been received from the server. The first argument is the status code, which is either a regular HTTP status code, or -1 to denote a DNS, connection or out-of-memory failure, or a timeout (currently at 10 seconds).</p>
<p>For each operation it is possible to provide custom HTTP headers or override standard headers. By default the <code>Host</code> header is deduced from the URL and <code>User-Agent</code> is <code>ESP8266</code>. Note, however, that the <code>Connection</code> header <em>can not</em> be overridden! It is always set to <code>close</code>.</p>
<p>HTTP redirects (HTTP status 300-308) are followed automatically up to a limit of 20 to avoid the dreaded redirect loops.</p>
<p>When the callback is invoked, it is passed the HTTP status code, the body as it was received, and a table of the response headers. All the header names have been lower cased
to make it easy to access. If there are multiple headers of the same name, then only the last one is returned.</p>
<p><strong>SSL/TLS support</strong></p>
<p>Take note of constraints documented in the <a href="../net/">net module</a>. </p>
<h2 id="httpdelete">http.delete()<a class="headerlink" href="#httpdelete" title="Permanent link">&para;</a></h2>
<p>Executes a HTTP DELETE request. Note that concurrent requests are not supported.</p>
<h4 id="syntax">Syntax<a class="headerlink" href="#syntax" title="Permanent link">&para;</a></h4>
<p><code>http.delete(url, headers, body, callback)</code></p>
<h4 id="parameters">Parameters<a class="headerlink" href="#parameters" title="Permanent link">&para;</a></h4>
<ul>
<li><code>url</code> The URL to fetch, including the <code>http://</code> or <code>https://</code> prefix</li>
<li><code>headers</code> Optional additional headers to append, <em>including \r\n</em>; may be <code>nil</code></li>
<li><code>body</code> The body to post; must already be encoded in the appropriate format, but may be empty</li>
<li><code>callback</code> The callback function to be invoked when the response has been received or an error occurred; it is invoked with the arguments <code>status_code</code>, <code>body</code> and <code>headers</code>. In case of an error <code>status_code</code> is set to -1.</li>
</ul>
<h4 id="returns">Returns<a class="headerlink" href="#returns" title="Permanent link">&para;</a></h4>
<p><code>nil</code></p>
<h4 id="example">Example<a class="headerlink" href="#example" title="Permanent link">&para;</a></h4>
<pre><code class="lua">http.delete('http://httpbin.org/delete',
  &quot;&quot;,
  &quot;&quot;,
  function(code, data)
    if (code &lt; 0) then
      print(&quot;HTTP request failed&quot;)
    else
      print(code, data)
    end
  end)
</code></pre>

<h2 id="httpget">http.get()<a class="headerlink" href="#httpget" title="Permanent link">&para;</a></h2>
<p>Executes a HTTP GET request. Note that concurrent requests are not supported.</p>
<h4 id="syntax_1">Syntax<a class="headerlink" href="#syntax_1" title="Permanent link">&para;</a></h4>
<p><code>http.get(url, headers, callback)</code></p>
<h4 id="parameters_1">Parameters<a class="headerlink" href="#parameters_1" title="Permanent link">&para;</a></h4>
<ul>
<li><code>url</code> The URL to fetch, including the <code>http://</code> or <code>https://</code> prefix</li>
<li><code>headers</code> Optional additional headers to append, <em>including \r\n</em>; may be <code>nil</code></li>
<li><code>callback</code> The callback function to be invoked when the response has been received or an error occurred; it is invoked with the arguments <code>status_code</code>, <code>body</code> and <code>headers</code>. In case of an error <code>status_code</code> is set to -1.</li>
</ul>
<h4 id="returns_1">Returns<a class="headerlink" href="#returns_1" title="Permanent link">&para;</a></h4>
<p><code>nil</code></p>
<h4 id="example_1">Example<a class="headerlink" href="#example_1" title="Permanent link">&para;</a></h4>
<pre><code class="lua">http.get(&quot;http://httpbin.org/ip&quot;, nil, function(code, data)
    if (code &lt; 0) then
      print(&quot;HTTP request failed&quot;)
    else
      print(code, data)
    end
  end)
</code></pre>

<h2 id="httppost">http.post()<a class="headerlink" href="#httppost" title="Permanent link">&para;</a></h2>
<p>Executes a HTTP POST request. Note that concurrent requests are not supported.</p>
<h4 id="syntax_2">Syntax<a class="headerlink" href="#syntax_2" title="Permanent link">&para;</a></h4>
<p><code>http.post(url, headers, body, callback)</code></p>
<h4 id="parameters_2">Parameters<a class="headerlink" href="#parameters_2" title="Permanent link">&para;</a></h4>
<ul>
<li><code>url</code> The URL to fetch, including the <code>http://</code> or <code>https://</code> prefix</li>
<li><code>headers</code> Optional additional headers to append, <em>including \r\n</em>; may be <code>nil</code></li>
<li><code>body</code> The body to post; must already be encoded in the appropriate format, but may be empty</li>
<li><code>callback</code> The callback function to be invoked when the response has been received or an error occurred; it is invoked with the arguments <code>status_code</code>, <code>body</code> and <code>headers</code>. In case of an error <code>status_code</code> is set to -1.</li>
</ul>
<h4 id="returns_2">Returns<a class="headerlink" href="#returns_2" title="Permanent link">&para;</a></h4>
<p><code>nil</code></p>
<h4 id="example_2">Example<a class="headerlink" href="#example_2" title="Permanent link">&para;</a></h4>
<pre><code class="lua">http.post('http://httpbin.org/post',
  'Content-Type: application/json\r\n',
  '{&quot;hello&quot;:&quot;world&quot;}',
  function(code, data)
    if (code &lt; 0) then
      print(&quot;HTTP request failed&quot;)
    else
      print(code, data)
    end
  end)
</code></pre>

<h2 id="httpput">http.put()<a class="headerlink" href="#httpput" title="Permanent link">&para;</a></h2>
<p>Executes a HTTP PUT request. Note that concurrent requests are not supported.</p>
<h4 id="syntax_3">Syntax<a class="headerlink" href="#syntax_3" title="Permanent link">&para;</a></h4>
<p><code>http.put(url, headers, body, callback)</code></p>
<h4 id="parameters_3">Parameters<a class="headerlink" href="#parameters_3" title="Permanent link">&para;</a></h4>
<ul>
<li><code>url</code> The URL to fetch, including the <code>http://</code> or <code>https://</code> prefix</li>
<li><code>headers</code> Optional additional headers to append, <em>including \r\n</em>; may be <code>nil</code></li>
<li><code>body</code> The body to post; must already be encoded in the appropriate format, but may be empty</li>
<li><code>callback</code> The callback function to be invoked when the response has been received or an error occurred; it is invoked with the arguments <code>status_code</code>, <code>body</code> and <code>headers</code>. In case of an error <code>status_code</code> is set to -1.</li>
</ul>
<h4 id="returns_3">Returns<a class="headerlink" href="#returns_3" title="Permanent link">&para;</a></h4>
<p><code>nil</code></p>
<h4 id="example_3">Example<a class="headerlink" href="#example_3" title="Permanent link">&para;</a></h4>
<pre><code class="lua">http.put('http://httpbin.org/put',
  'Content-Type: text/plain\r\n',
  'Hello!\nStay a while, and listen...\n',
  function(code, data)
    if (code &lt; 0) then
      print(&quot;HTTP request failed&quot;)
    else
      print(code, data)
    end
  end)
</code></pre>

<h2 id="httprequest">http.request()<a class="headerlink" href="#httprequest" title="Permanent link">&para;</a></h2>
<p>Execute a custom HTTP request for any HTTP method. Note that concurrent requests are not supported.</p>
<h4 id="syntax_4">Syntax<a class="headerlink" href="#syntax_4" title="Permanent link">&para;</a></h4>
<p><code>http.request(url, method, headers, body, callback)</code></p>
<h4 id="parameters_4">Parameters<a class="headerlink" href="#parameters_4" title="Permanent link">&para;</a></h4>
<ul>
<li><code>url</code> The URL to fetch, including the <code>http://</code> or <code>https://</code> prefix</li>
<li><code>method</code> The HTTP method to use, e.g. "GET", "HEAD", "OPTIONS" etc</li>
<li><code>headers</code> Optional additional headers to append, <em>including \r\n</em>; may be <code>nil</code></li>
<li><code>body</code> The body to post; must already be encoded in the appropriate format, but may be empty</li>
<li><code>callback</code> The callback function to be invoked when the response has been received or an error occurred; it is invoked with the arguments <code>status_code</code>, <code>body</code> and <code>headers</code>. In case of an error <code>status_code</code> is set to -1.</li>
</ul>
<h4 id="returns_4">Returns<a class="headerlink" href="#returns_4" title="Permanent link">&para;</a></h4>
<p><code>nil</code></p>
<h4 id="example_4">Example<a class="headerlink" href="#example_4" title="Permanent link">&para;</a></h4>
<pre><code class="lua">http.request(&quot;http://httpbin.org&quot;, &quot;HEAD&quot;, &quot;&quot;, &quot;&quot;, 
  function(code, data)
    if (code &lt; 0) then
      print(&quot;HTTP request failed&quot;)
    else
      print(code, data)
    end
  end)
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../hx711/" class="btn btn-neutral float-right" title="hx711">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../hmc5883l/" class="btn btn-neutral" title="hmc5883l"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/nodemcu/nodemcu-firmware/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../hmc5883l/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../hx711/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../../..';</script>
    <script src="../../../js/theme.js"></script>
      <script src="../../../js/extra.js"></script>
      <script src="../../../search/require.js"></script>
      <script src="../../../search/search.js"></script>

</body>
</html>
